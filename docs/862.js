"use strict";(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[862],{1424:(N,y,l)=>{l.d(y,{C:()=>b});var t=l(4650),T=l(6895),v=l(4006);function Z(_,C){if(1&_){const a=t.EpF();t.TgZ(0,"input",9),t.NdJ("ngModelChange",function(u){t.CHM(a);const x=t.oxw().$implicit;return t.KtG(x.value=u)}),t.qZA()}if(2&_){const a=t.oxw().$implicit;t.Q6J("type",a.type)("name",a.name)("placeholder",a.title)("ngModel",a.value)}}function h(_,C){if(1&_&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&_){const a=C.$implicit;t.Q6J("value",a),t.xp6(1),t.Oqu(a)}}function e(_,C){if(1&_){const a=t.EpF();t.TgZ(0,"select",10),t.NdJ("ngModelChange",function(u){t.CHM(a);const x=t.oxw().$implicit;return t.KtG(x.value=u)}),t.TgZ(1,"option",11),t._uU(2,"Tous"),t.qZA(),t.YNc(3,h,2,2,"option",12),t.qZA()}if(2&_){const a=t.oxw().$implicit;t.Q6J("name",a.name)("placeholder",a.title)("ngModel",a.value),t.xp6(3),t.Q6J("ngForOf",a.elements)}}function m(_,C){if(1&_){const a=t.EpF();t.TgZ(0,"select",10),t.NdJ("ngModelChange",function(u){t.CHM(a);const x=t.oxw().$implicit;return t.KtG(x.value=u)}),t.TgZ(1,"option",11),t._uU(2,"Tous"),t.qZA(),t.TgZ(3,"option",13),t._uU(4,"Activ\xe9"),t.qZA(),t.TgZ(5,"option",13),t._uU(6,"D\xe9sactiv\xe9"),t.qZA()()}if(2&_){const a=t.oxw().$implicit;t.Q6J("name",a.name)("placeholder",a.title)("ngModel",a.value),t.xp6(3),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0)}}function g(_,C){if(1&_&&(t.TgZ(0,"div",5)(1,"label",6),t._uU(2),t.qZA(),t.YNc(3,Z,1,4,"input",7),t.YNc(4,e,4,4,"select",8),t.YNc(5,m,7,5,"select",8),t.qZA()),2&_){const a=C.$implicit;t.xp6(2),t.Oqu(a.title),t.xp6(1),t.Q6J("ngIf","text"==a.type||"number"==a.type),t.xp6(1),t.Q6J("ngIf","select"==a.type),t.xp6(1),t.Q6J("ngIf","status"==a.type)}}let b=(()=>{class _{constructor(){this.onFilterChange=new t.vpe}ngOnInit(){}onFilter(){let a={};for(let E of this.filters)a[E.name]=E.value;this.onFilterChange.emit(a)}}return _.\u0275fac=function(a){return new(a||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-base-filter"]],inputs:{filters:"filters"},outputs:{onFilterChange:"onFilterChange"},decls:6,vars:1,consts:[[1,"card-header","border-0","d-flex"],[1,"row",2,"width","100%"],["class","col-md-3 mb-1",4,"ngFor","ngForOf"],[1,"col-md-12","mt-1","text-right"],[1,"btn","btn-info",3,"click"],[1,"col-md-3","mb-1"],[1,"label"],["class","form-control",3,"type","name","placeholder","ngModel","ngModelChange",4,"ngIf"],["class","form-control",3,"name","placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"form-control",3,"type","name","placeholder","ngModel","ngModelChange"],[1,"form-control",3,"name","placeholder","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,E){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,g,6,4,"div",2),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return E.onFilter()}),t._uU(5," Filtrer "),t.qZA()()()()),2&a&&(t.xp6(2),t.Q6J("ngForOf",E.filters))},dependencies:[T.sg,T.O5,v.YN,v.Kr,v.Fj,v.EJ,v.JJ,v.On]}),_})()},9359:(N,y,l)=>{l.d(y,{K:()=>O});var t=l(4650),T=l(4463),v=l(3060),Z=l(6895),h=l(1572),e=l(4859),m=l(7392);function g(c,M){if(1&c&&(t.TgZ(0,"th",4),t._uU(1),t.qZA()),2&c){const r=M.$implicit;t.xp6(1),t.Oqu(r.header)}}function b(c,M){if(1&c&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&c){const r=t.oxw().$implicit,f=t.oxw().$implicit;t.xp6(1),t.hij(" ",f[r.key]," ")}}function _(c,M){if(1&c&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&c){const r=t.oxw().$implicit,f=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,f[r.key],"short")," ")}}function C(c,M){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"label",9)(2,"input",10),t.NdJ("change",function(){t.CHM(r);const A=t.oxw().$implicit,F=t.oxw().$implicit,J=t.oxw(2);return t.KtG(J.toggleStatusChange(!F[A.key],F.id))}),t.qZA(),t._UZ(3,"span",11),t.qZA()()}if(2&c){const r=t.oxw().$implicit,f=t.oxw().$implicit;t.xp6(2),t.Q6J("checked",f[r.key])}}function a(c,M){if(1&c&&(t.TgZ(0,"th"),t.YNc(1,b,2,1,"div",5),t.YNc(2,_,3,4,"div",5),t.YNc(3,C,4,1,"div",5),t.qZA()),2&c){const r=M.$implicit;t.xp6(1),t.Q6J("ngIf","text"===r.type),t.xp6(1),t.Q6J("ngIf","date"===r.type),t.xp6(1),t.Q6J("ngIf","status"===r.type)}}function E(c,M){if(1&c){const r=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(r);const A=t.oxw().$implicit,F=t.oxw(2);return t.KtG(F.view(A))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove_red_eye"),t.qZA()()}}function u(c,M){if(1&c){const r=t.EpF();t.TgZ(0,"tr"),t.YNc(1,a,4,3,"th",6),t.TgZ(2,"td")(3,"button",7),t.NdJ("click",function(){const F=t.CHM(r).$implicit,J=t.oxw(2);return t.KtG(J.edit(F))}),t.TgZ(4,"mat-icon"),t._uU(5,"edit"),t.qZA()(),t.YNc(6,E,3,0,"button",8),t.qZA()()}if(2&c){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.tableData),t.xp6(5),t.Q6J("ngIf",r.viewLink)}}function x(c,M){if(1&c&&(t.TgZ(0,"tbody"),t.YNc(1,u,7,2,"tr",6),t.qZA()),2&c){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.data)}}function L(c,M){1&c&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",13)(3,"div",14),t._UZ(4,"mat-spinner",15),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()),2&c&&(t.xp6(4),t.Q6J("diameter",30),t.xp6(1),t.hij(" ",t.lcZ(6,2,"LOADING")," "))}let O=(()=>{class c{constructor(r,f){this.translate=r,this.router=f,this.onToggleStatus=new t.vpe,this.onEdit=new t.vpe}ngOnInit(){}toggleStatusChange(r,f){this.onToggleStatus.emit({id:f,status:r})}edit(r){this.onEdit.emit(r)}view(r){this.router.navigate([this.viewLink,r.id])}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(T.sK),t.Y36(v.F0))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-base-table"]],inputs:{isLoading:"isLoading",data:"data",tableData:"tableData",viewLink:"viewLink"},outputs:{onToggleStatus:"onToggleStatus",onEdit:"onEdit"},decls:8,vars:3,consts:[[1,"table-responsive"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col",4,"ngFor","ngForOf"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Modifier",3,"click"],["mat-mini-fab","","color","primary","class","ml-2","aria-label","Details",3,"click",4,"ngIf"],[1,"custom-toggle"],["type","checkbox",3,"checked","change"],[1,"custom-toggle-slider","rounded-circle"],["mat-mini-fab","","color","primary","aria-label","Details",1,"ml-2",3,"click"],["colspan","8"],[1,"loading-holder"],[2,"margin-right","10px",3,"diameter"]],template:function(r,f){1&r&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),t.YNc(4,g,2,1,"th",3),t._UZ(5,"th",4),t.qZA()(),t.YNc(6,x,2,1,"tbody",5),t.YNc(7,L,7,4,"tbody",5),t.qZA()()),2&r&&(t.xp6(4),t.Q6J("ngForOf",f.tableData),t.xp6(2),t.Q6J("ngIf",!f.isLoading),t.xp6(1),t.Q6J("ngIf",f.isLoading))},dependencies:[Z.sg,Z.O5,h.Ou,e.lW,m.Hw,Z.uU,T.X$],styles:["button.edit-button[_ngcontent-%COMP%]{text-align:center;border-radius:50%;height:40px;width:40px;border:1px solid #5e72e4;cursor:pointer;font-size:15px}.loading-holder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),c})()},3986:(N,y,l)=>{l.d(y,{N:()=>h});var t=l(4650),T=l(6895);const v=function(e){return{active:e}};function Z(e,m){if(1&e){const g=t.EpF();t.TgZ(0,"li",9)(1,"button",4),t.NdJ("click",function(){const C=t.CHM(g).index,a=t.oxw();return t.KtG(a.goToPage(C+1))}),t._uU(2),t.qZA()()}if(2&e){const g=m.index,b=t.oxw();t.Q6J("ngClass",t.VKq(2,v,g+1===b.page)),t.xp6(2),t.Oqu(g+1)}}let h=(()=>{class e{constructor(){this.page=1,this.pagesCount=1,this.onPageChange=new t.vpe}ngOnInit(){}arrayOfN(g){return Array(g)}nextPage(){this.page<this.pagesCount&&(this.page++,this.onPageChange.emit(this.page))}previousPage(){this.page>1&&(this.page--,this.onPageChange.emit(this.page))}goToPage(g){g!=this.page&&g>0&&g<=this.pagesCount&&(this.page=g,this.onPageChange.emit(this.page))}}return e.\u0275fac=function(g){return new(g||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pagination-links"]],inputs:{page:"page",pagesCount:"pagesCount"},outputs:{onPageChange:"onPageChange"},decls:14,vars:1,consts:[[1,"card-footer","py-4"],["aria-label","..."],[1,"pagination","justify-content-end","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fas","fa-angle-left"],[1,"sr-only"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"fas","fa-angle-right"],[1,"page-item",3,"ngClass"]],template:function(g,b){1&g&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"ul",2)(3,"li",3)(4,"button",4),t.NdJ("click",function(){return b.previousPage()}),t._UZ(5,"i",5),t.TgZ(6,"span",6),t._uU(7,"Previous"),t.qZA()()(),t.YNc(8,Z,3,4,"li",7),t.TgZ(9,"li",3)(10,"button",4),t.NdJ("click",function(){return b.nextPage()}),t._UZ(11,"i",8),t.TgZ(12,"span",6),t._uU(13,"Next"),t.qZA()()()()()()),2&g&&(t.xp6(8),t.Q6J("ngForOf",b.arrayOfN(b.pagesCount)))},dependencies:[T.mk,T.sg]}),e})()},1862:(N,y,l)=>{l.r(y),l.d(y,{MedicinesModule:()=>W});var t=l(6895),T=l(3060),v=l(7188),Z=l(4327),h=l(136),e=l(4650),m=l(4463),g=l(3986),b=l(9359),_=l(1424),C=l(2953),a=l(7009),E=l(4424),u=l(4006);const x=["f"];function L(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Code est requis. "),e.qZA())}function O(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Nom est requis. "),e.qZA())}function c(o,d){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&o){const i=d.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function M(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Type est requis. "),e.qZA())}function r(o,d){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&o){const i=d.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function f(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Variante est requis. "),e.qZA())}function A(o,d){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&o){const i=d.$implicit;e.Q6J("value",i.name),e.xp6(1),e.Oqu(i.name)}}function F(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Cat\xe9gorie est requis. "),e.qZA())}function J(o,d){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&o){const i=d.$implicit;e.Q6J("value",i),e.xp6(1),e.Oqu(i)}}function B(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Sous-cat\xe9gorie est requis. "),e.qZA())}function D(o,d){if(1&o){const i=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"select",31,32),e.NdJ("ngModelChange",function(s){e.CHM(i);const p=e.oxw();return e.KtG(p.data.sub_category=s)}),e.TgZ(4,"option",12),e._uU(5,"Sous-cat\xe9gorie"),e.qZA(),e.YNc(6,J,2,2,"option",13),e.qZA(),e.YNc(7,B,2,0,"div",7),e.qZA()()}if(2&o){const i=e.MAs(3),n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.data.sub_category),e.xp6(4),e.Q6J("ngForOf",n.sub_categories),e.xp6(1),e.Q6J("ngIf",i.invalid&&i.touched)}}function k(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Prix d'achat est requis. "),e.qZA())}function S(o,d){1&o&&(e.TgZ(0,"div",29),e._uU(1," Prix de vente est requis. "),e.qZA())}let K=(()=>{class o{constructor(i,n,s){this.medicinesService=i,this.modalService=n,this._snackBar=s,this.title=h._G.MEDICINES,this.isLoading=!1,this.types=h.eK,this.categories=h.OJ,this.sub_categories=[],this.variants=h.uK,this.horizontalPosition="end",this.verticalPosition="bottom",this.closingEvent=new e.vpe,this.reloadEvent=new e.vpe}ngOnInit(){this.title=(this.selectedElement?h._G.UPDATE_ELEMENT:h._G.CREATE_ELEMENT)+" "+this.title,this.data={type:this.selectedElement?this.selectedElement.type:"",code:this.selectedElement?this.selectedElement.code:"",name:this.selectedElement?this.selectedElement.name:"",variant:this.selectedElement?this.selectedElement.variant:"",category:this.selectedElement?this.selectedElement.category:"",sub_category:this.selectedElement?this.selectedElement.sub_category:"",buying_price:this.selectedElement?this.selectedElement.buying_price:"",selling_price:this.selectedElement?this.selectedElement.selling_price:"",enabled:!this.selectedElement||this.selectedElement.enabled},this.onChangeCategory()}onClose(){this.closingEvent.emit()}toggleStatus(){this.data.enabled=!this.data.enabled}onSubmit(){const i=Object.values(this.form.controls);for(let n of i)if(n.invalid)return;this.isLoading=!0,this.selectedElement?this.medicinesService.update(this.selectedElement.id,this.data).subscribe(n=>{this.onSuccess(n)},n=>{this.onError(n)}):this.medicinesService.create(this.data).subscribe(n=>{this.onSuccess(n)},n=>{this.onError(n)})}onSuccess(i){this.isLoading=!1,this.reloadEvent.emit(),this.modalService.dismissAll(),this._snackBar.open("Enregistr\xe9 avec succ\xe8s!","Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["success-snackbar"]})}onError(i){this.isLoading=!1;let n=i.error.data;for(let s in n)this._snackBar.open(n[s],"Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["danger-snackbar"]})}onChangeCategory(){const i=this.categories.find(n=>n.name===this.data.category);this.sub_categories=i?[...i.sub_categories]:[]}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(v.M),e.Y36(C.FF),e.Y36(a.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-medicines-form"]],viewQuery:function(i,n){if(1&i&&e.Gf(x,5),2&i){let s;e.iGM(s=e.CRH())&&(n.form=s.first)}},inputs:{selectedElement:"selectedElement"},outputs:{closingEvent:"closingEvent",reloadEvent:"reloadEvent"},decls:56,vars:21,consts:[[3,"title","isLoading","closingEvent","submit"],["f","ngForm"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","name","code","required","","placeholder","Code",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["code","ngModel"],["class","error-message",4,"ngIf"],["type","text","name","name","required","","placeholder","Nom",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["name","ngModel"],["name","type","required","","placeholder","Type",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["type","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","variant","required","","placeholder","Variante",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["variant","ngModel"],["name","category","required","","placeholder","Cat\xe9gorie",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange","change"],["category","ngModel"],["class","col-md-6",4,"ngIf"],["type","number","name","buying_price","required","","placeholder","Prix d'achat",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["buying_price","ngModel"],["type","number","name","selling_price","required","","placeholder","Prix de vente",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["selling_price","ngModel"],[1,"col-md-6","d-flex","align-items-center"],[1,"form-group","d-flex","mb-0"],[1,"mr-2"],[1,"custom-toggle","mb-0"],["type","checkbox",3,"checked","click"],[1,"custom-toggle-slider","rounded-circle"],[1,"error-message"],[3,"value"],["name","sub_category","required","","placeholder","Sous-cat\xe9gorie",1,"form-control","form-control-alternative",3,"ngModel","ngModelChange"],["sub_category","ngModel"]],template:function(i,n){if(1&i&&(e.TgZ(0,"app-base-modal",0),e.NdJ("closingEvent",function(){return n.onClose()})("submit",function(){return n.onSubmit()}),e.TgZ(1,"form",null,1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"input",5,6),e.NdJ("ngModelChange",function(p){return n.data.code=p}),e.qZA(),e.YNc(8,L,2,0,"div",7),e.qZA()(),e.TgZ(9,"div",3)(10,"div",4)(11,"input",8,9),e.NdJ("ngModelChange",function(p){return n.data.name=p}),e.qZA(),e.YNc(13,O,2,0,"div",7),e.qZA()(),e.TgZ(14,"div",3)(15,"div",4)(16,"select",10,11),e.NdJ("ngModelChange",function(p){return n.data.type=p}),e.TgZ(18,"option",12),e._uU(19,"Type"),e.qZA(),e.YNc(20,c,2,2,"option",13),e.qZA(),e.YNc(21,M,2,0,"div",7),e.qZA()(),e.TgZ(22,"div",3)(23,"div",4)(24,"select",14,15),e.NdJ("ngModelChange",function(p){return n.data.variant=p}),e.TgZ(26,"option",12),e._uU(27,"Variante"),e.qZA(),e.YNc(28,r,2,2,"option",13),e.qZA(),e.YNc(29,f,2,0,"div",7),e.qZA()(),e.TgZ(30,"div",3)(31,"div",4)(32,"select",16,17),e.NdJ("ngModelChange",function(p){return n.data.category=p})("change",function(){return n.onChangeCategory()}),e.TgZ(34,"option",12),e._uU(35,"Cat\xe9gorie"),e.qZA(),e.YNc(36,A,2,2,"option",13),e.qZA(),e.YNc(37,F,2,0,"div",7),e.qZA()(),e.YNc(38,D,8,3,"div",18),e.TgZ(39,"div",3)(40,"div",4)(41,"input",19,20),e.NdJ("ngModelChange",function(p){return n.data.buying_price=p}),e.qZA(),e.YNc(43,k,2,0,"div",7),e.qZA()(),e.TgZ(44,"div",3)(45,"div",4)(46,"input",21,22),e.NdJ("ngModelChange",function(p){return n.data.selling_price=p}),e.qZA(),e.YNc(48,S,2,0,"div",7),e.qZA()(),e.TgZ(49,"div",23)(50,"div",24)(51,"span",25),e._uU(52,"Enabled:"),e.qZA(),e.TgZ(53,"label",26)(54,"input",27),e.NdJ("click",function(){return n.toggleStatus()}),e.qZA(),e._UZ(55,"span",28),e.qZA()()()()()()),2&i){const s=e.MAs(7),p=e.MAs(12),P=e.MAs(17),q=e.MAs(25),U=e.MAs(33),Q=e.MAs(42),I=e.MAs(47);e.Q6J("title",n.title)("isLoading",n.isLoading),e.xp6(6),e.Q6J("ngModel",n.data.code),e.xp6(2),e.Q6J("ngIf",s.invalid&&s.touched),e.xp6(3),e.Q6J("ngModel",n.data.name),e.xp6(2),e.Q6J("ngIf",p.invalid&&p.touched),e.xp6(3),e.Q6J("ngModel",n.data.type),e.xp6(4),e.Q6J("ngForOf",n.types),e.xp6(1),e.Q6J("ngIf",P.invalid&&P.touched),e.xp6(3),e.Q6J("ngModel",n.data.variant),e.xp6(4),e.Q6J("ngForOf",n.variants),e.xp6(1),e.Q6J("ngIf",q.invalid&&q.touched),e.xp6(3),e.Q6J("ngModel",n.data.category),e.xp6(4),e.Q6J("ngForOf",n.categories),e.xp6(1),e.Q6J("ngIf",U.invalid&&U.touched),e.xp6(1),e.Q6J("ngIf",n.sub_categories.length>0),e.xp6(3),e.Q6J("ngModel",n.data.buying_price),e.xp6(2),e.Q6J("ngIf",Q.invalid&&Q.touched),e.xp6(3),e.Q6J("ngModel",n.data.selling_price),e.xp6(2),e.Q6J("ngIf",I.invalid&&I.touched),e.xp6(6),e.Q6J("checked",n.data.enabled)}},dependencies:[t.sg,t.O5,E.u,u._Y,u.YN,u.Kr,u.Fj,u.wV,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F]}),o})();function Y(o,d){if(1&o){const i=e.EpF();e.TgZ(0,"app-medicines-form",16),e.NdJ("closingEvent",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onClose())})("reloadEvent",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onFormReload())}),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("id",i.selectedElement)("selectedElement",i.selectedElement)}}const w=[{path:"",component:(()=>{class o{constructor(i,n){this.medicinesService=i,this.translate=n,this.data=[],this.isShowForm=!1,this.selectedElement=null,this.page=1,this.pagesCount=1,this.isLoading=!0,this.tableData=[{header:"Id",key:"id",type:"text"},{header:"Type",key:"type",type:"text"},{header:"Code",key:"code",type:"text"},{header:"Nom",key:"name",type:"text"},{header:"Date de cr\xe9ation",key:"created_at",type:"date"},{header:"Date de modification",key:"updated_at",type:"date"},{header:"Status",key:"enabled",type:"status"}],this.filters={type:"",code:"",name:"",id:""},this.filtersElements=[{type:"number",name:"id",title:"ID",value:""},{type:"text",name:"code",title:"Code",value:""},{type:"text",name:"name",title:"Nom",value:""},{type:"select",name:"type",title:"Type",value:"",elements:h.eK},{type:"status",name:"enabled",title:"Activ\xe9",value:""}]}ngOnInit(){this.onLoad()}onAdd(){this.isShowForm=!0}onClose(){this.isShowForm=!1,this.selectedElement=!1}onFormReload(){this.onClose(),this.onLoad()}toggleStatusChange(i){console.log(i.status,i.id),this.isLoading=!0,this.medicinesService.status(i.id,{enabled:i.status}).subscribe(n=>{let s=this.data.findIndex(p=>p.id===i.id);s>=0&&(this.data[s].enabled=n.data.enabled),this.isLoading=!1})}onEdit(i){this.isShowForm=!0,this.selectedElement=i}onPageChange(i){console.log(i),this.page=i,this.onLoad()}onLoad(){this.isLoading=!0;let i=this.getFilters();console.log(i),this.medicinesService.all({params:i}).subscribe(n=>{console.log(n),this.data=n.data.data,this.pagesCount=n.data.last_page,this.isLoading=!1},n=>{this.isLoading=!1})}exportData(){this.isLoading=!0;let i=this.getFilters(!0);this.medicinesService.all({params:i,responseType:"blob"}).subscribe(n=>{console.log(n);const s=new Blob([n],{type:"text/csv"});(0,Z.saveAs)(s,"medicines.csv"),this.isLoading=!1},n=>{console.log(n),this.isLoading=!1})}getFilters(i=!1){let n={};for(let s in this.filters)this.filters[s]&&""!=this.filters[s]&&(n[s]=this.filters[s]);return n.page=this.page,n.limit=15,i&&(n.export=!0),n}onFiltersChange(i){this.filters={...i},this.onLoad()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(v.M),e.Y36(m.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-medicines-list"]],decls:19,vars:7,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0","d-flex"],[1,"mb-0"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[3,"filters","onFilterChange"],[3,"tableData","data","isLoading","onEdit","onToggleStatus"],[3,"page","pagesCount","onPageChange"],[3,"id","selectedElement","closingEvent","reloadEvent",4,"ngIf"],[3,"id","selectedElement","closingEvent","reloadEvent"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),e._uU(9,"M\xc9DICAMENTS"),e.qZA(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return n.onAdd()}),e._uU(12," Ajouter "),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return n.exportData()}),e._uU(14," Export "),e.qZA()()(),e.TgZ(15,"app-base-filter",12),e.NdJ("onFilterChange",function(p){return n.onFiltersChange(p)}),e.qZA(),e.TgZ(16,"app-base-table",13),e.NdJ("onEdit",function(p){return n.onEdit(p)})("onToggleStatus",function(p){return n.toggleStatusChange(p)}),e.qZA(),e.TgZ(17,"app-pagination-links",14),e.NdJ("onPageChange",function(p){return n.onPageChange(p)}),e.qZA()()()()(),e.YNc(18,Y,1,2,"app-medicines-form",15)),2&i&&(e.xp6(15),e.Q6J("filters",n.filtersElements),e.xp6(1),e.Q6J("tableData",n.tableData)("data",n.data)("isLoading",n.isLoading),e.xp6(1),e.Q6J("page",n.page)("pagesCount",n.pagesCount),e.xp6(1),e.Q6J("ngIf",n.isShowForm))},dependencies:[t.O5,g.N,b.K,_.C,K]}),o})()}];let $=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild(w),T.Bz]}),o})();var R=l(5642),G=l(529);let W=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[t.ez,$,R.K,G.JF,u.u5,m.aw,a.ZX]}),o})()},7188:(N,y,l)=>{l.d(y,{M:()=>Z});var t=l(2340),T=l(4650),v=l(529);let Z=(()=>{class h{constructor(m){this.http=m}all(m){return this.http.get(`${t.N.url}/api/medicines`,m)}update(m,g){return this.http.put(`${t.N.url}/api/medicines/${m}`,g)}create(m){return this.http.post(`${t.N.url}/api/medicines`,m)}status(m,g){return this.http.put(`${t.N.url}/api/medicines/status/${m}`,g)}find(m){return this.http.get(`${t.N.url}/api/medicines/${m}`)}}return h.\u0275fac=function(m){return new(m||h)(T.LFG(v.eN))},h.\u0275prov=T.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);