"use strict";(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[81],{1424:(Q,w,_)=>{_.d(w,{C:()=>b});var o=_(4650),F=_(6895),M=_(4006);function J(p,v){if(1&p){const d=o.EpF();o.TgZ(0,"input",9),o.NdJ("ngModelChange",function(T){o.CHM(d);const A=o.oxw().$implicit;return o.KtG(A.value=T)}),o.qZA()}if(2&p){const d=o.oxw().$implicit;o.Q6J("type",d.type)("name",d.name)("placeholder",d.title)("ngModel",d.value)}}function e(p,v){if(1&p&&(o.TgZ(0,"option",13),o._uU(1),o.qZA()),2&p){const d=v.$implicit;o.Q6J("value",d),o.xp6(1),o.Oqu(d)}}function C(p,v){if(1&p){const d=o.EpF();o.TgZ(0,"select",10),o.NdJ("ngModelChange",function(T){o.CHM(d);const A=o.oxw().$implicit;return o.KtG(A.value=T)}),o.TgZ(1,"option",11),o._uU(2,"Tous"),o.qZA(),o.YNc(3,e,2,2,"option",12),o.qZA()}if(2&p){const d=o.oxw().$implicit;o.Q6J("name",d.name)("placeholder",d.title)("ngModel",d.value),o.xp6(3),o.Q6J("ngForOf",d.elements)}}function E(p,v){if(1&p){const d=o.EpF();o.TgZ(0,"select",10),o.NdJ("ngModelChange",function(T){o.CHM(d);const A=o.oxw().$implicit;return o.KtG(A.value=T)}),o.TgZ(1,"option",11),o._uU(2,"Tous"),o.qZA(),o.TgZ(3,"option",13),o._uU(4,"Activ\xe9"),o.qZA(),o.TgZ(5,"option",13),o._uU(6,"D\xe9sactiv\xe9"),o.qZA()()}if(2&p){const d=o.oxw().$implicit;o.Q6J("name",d.name)("placeholder",d.title)("ngModel",d.value),o.xp6(3),o.Q6J("value",1),o.xp6(2),o.Q6J("value",0)}}function f(p,v){if(1&p&&(o.TgZ(0,"div",5)(1,"label",6),o._uU(2),o.qZA(),o.YNc(3,J,1,4,"input",7),o.YNc(4,C,4,4,"select",8),o.YNc(5,E,7,5,"select",8),o.qZA()),2&p){const d=v.$implicit;o.xp6(2),o.Oqu(d.title),o.xp6(1),o.Q6J("ngIf","text"==d.type||"number"==d.type),o.xp6(1),o.Q6J("ngIf","select"==d.type),o.xp6(1),o.Q6J("ngIf","status"==d.type)}}let b=(()=>{class p{constructor(){this.onFilterChange=new o.vpe}ngOnInit(){}onFilter(){let d={};for(let g of this.filters)d[g.name]=g.value;this.onFilterChange.emit(d)}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-base-filter"]],inputs:{filters:"filters"},outputs:{onFilterChange:"onFilterChange"},decls:6,vars:1,consts:[[1,"card-header","border-0","d-flex"],[1,"row",2,"width","100%"],["class","col-md-3 mb-1",4,"ngFor","ngForOf"],[1,"col-md-12","mt-1","text-right"],[1,"btn","btn-info",3,"click"],[1,"col-md-3","mb-1"],[1,"label"],["class","form-control",3,"type","name","placeholder","ngModel","ngModelChange",4,"ngIf"],["class","form-control",3,"name","placeholder","ngModel","ngModelChange",4,"ngIf"],[1,"form-control",3,"type","name","placeholder","ngModel","ngModelChange"],[1,"form-control",3,"name","placeholder","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(d,g){1&d&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,f,6,4,"div",2),o.TgZ(3,"div",3)(4,"button",4),o.NdJ("click",function(){return g.onFilter()}),o._uU(5," Filtrer "),o.qZA()()()()),2&d&&(o.xp6(2),o.Q6J("ngForOf",g.filters))},dependencies:[F.sg,F.O5,M.YN,M.Kr,M.Fj,M.EJ,M.JJ,M.On]}),p})()},9359:(Q,w,_)=>{_.d(w,{K:()=>k});var o=_(4650),F=_(4463),M=_(3060),J=_(6895),e=_(1572),C=_(4859),E=_(7392);function f(u,Z){if(1&u&&(o.TgZ(0,"th",4),o._uU(1),o.qZA()),2&u){const c=Z.$implicit;o.xp6(1),o.Oqu(c.header)}}function b(u,Z){if(1&u&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&u){const c=o.oxw().$implicit,h=o.oxw().$implicit;o.xp6(1),o.hij(" ",h[c.key]," ")}}function p(u,Z){if(1&u&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"date"),o.qZA()),2&u){const c=o.oxw().$implicit,h=o.oxw().$implicit;o.xp6(1),o.hij(" ",o.xi3(2,1,h[c.key],"short")," ")}}function v(u,Z){if(1&u){const c=o.EpF();o.TgZ(0,"div")(1,"label",9)(2,"input",10),o.NdJ("change",function(){o.CHM(c);const q=o.oxw().$implicit,y=o.oxw().$implicit,O=o.oxw(2);return o.KtG(O.toggleStatusChange(!y[q.key],y.id))}),o.qZA(),o._UZ(3,"span",11),o.qZA()()}if(2&u){const c=o.oxw().$implicit,h=o.oxw().$implicit;o.xp6(2),o.Q6J("checked",h[c.key])}}function d(u,Z){if(1&u&&(o.TgZ(0,"th"),o.YNc(1,b,2,1,"div",5),o.YNc(2,p,3,4,"div",5),o.YNc(3,v,4,1,"div",5),o.qZA()),2&u){const c=Z.$implicit;o.xp6(1),o.Q6J("ngIf","text"===c.type),o.xp6(1),o.Q6J("ngIf","date"===c.type),o.xp6(1),o.Q6J("ngIf","status"===c.type)}}function g(u,Z){if(1&u){const c=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(c);const q=o.oxw().$implicit,y=o.oxw(2);return o.KtG(y.view(q))}),o.TgZ(1,"mat-icon"),o._uU(2,"remove_red_eye"),o.qZA()()}}function T(u,Z){if(1&u){const c=o.EpF();o.TgZ(0,"tr"),o.YNc(1,d,4,3,"th",6),o.TgZ(2,"td")(3,"button",7),o.NdJ("click",function(){const y=o.CHM(c).$implicit,O=o.oxw(2);return o.KtG(O.edit(y))}),o.TgZ(4,"mat-icon"),o._uU(5,"edit"),o.qZA()(),o.YNc(6,g,3,0,"button",8),o.qZA()()}if(2&u){const c=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",c.tableData),o.xp6(5),o.Q6J("ngIf",c.viewLink)}}function A(u,Z){if(1&u&&(o.TgZ(0,"tbody"),o.YNc(1,T,7,2,"tr",6),o.qZA()),2&u){const c=o.oxw();o.xp6(1),o.Q6J("ngForOf",c.data)}}function N(u,Z){1&u&&(o.TgZ(0,"tbody")(1,"tr")(2,"td",13)(3,"div",14),o._UZ(4,"mat-spinner",15),o._uU(5),o.ALo(6,"translate"),o.qZA()()()()),2&u&&(o.xp6(4),o.Q6J("diameter",30),o.xp6(1),o.hij(" ",o.lcZ(6,2,"LOADING")," "))}let k=(()=>{class u{constructor(c,h){this.translate=c,this.router=h,this.onToggleStatus=new o.vpe,this.onEdit=new o.vpe}ngOnInit(){}toggleStatusChange(c,h){this.onToggleStatus.emit({id:h,status:c})}edit(c){this.onEdit.emit(c)}view(c){this.router.navigate([this.viewLink,c.id])}}return u.\u0275fac=function(c){return new(c||u)(o.Y36(F.sK),o.Y36(M.F0))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-base-table"]],inputs:{isLoading:"isLoading",data:"data",tableData:"tableData",viewLink:"viewLink"},outputs:{onToggleStatus:"onToggleStatus",onEdit:"onEdit"},decls:8,vars:3,consts:[[1,"table-responsive"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col",4,"ngFor","ngForOf"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","aria-label","Modifier",3,"click"],["mat-mini-fab","","color","primary","class","ml-2","aria-label","Details",3,"click",4,"ngIf"],[1,"custom-toggle"],["type","checkbox",3,"checked","change"],[1,"custom-toggle-slider","rounded-circle"],["mat-mini-fab","","color","primary","aria-label","Details",1,"ml-2",3,"click"],["colspan","8"],[1,"loading-holder"],[2,"margin-right","10px",3,"diameter"]],template:function(c,h){1&c&&(o.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),o.YNc(4,f,2,1,"th",3),o._UZ(5,"th",4),o.qZA()(),o.YNc(6,A,2,1,"tbody",5),o.YNc(7,N,7,4,"tbody",5),o.qZA()()),2&c&&(o.xp6(4),o.Q6J("ngForOf",h.tableData),o.xp6(2),o.Q6J("ngIf",!h.isLoading),o.xp6(1),o.Q6J("ngIf",h.isLoading))},dependencies:[J.sg,J.O5,e.Ou,C.lW,E.Hw,J.uU,F.X$],styles:["button.edit-button[_ngcontent-%COMP%]{text-align:center;border-radius:50%;height:40px;width:40px;border:1px solid #5e72e4;cursor:pointer;font-size:15px}.loading-holder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),u})()},3986:(Q,w,_)=>{_.d(w,{N:()=>e});var o=_(4650),F=_(6895);const M=function(C){return{active:C}};function J(C,E){if(1&C){const f=o.EpF();o.TgZ(0,"li",9)(1,"button",4),o.NdJ("click",function(){const v=o.CHM(f).index,d=o.oxw();return o.KtG(d.goToPage(v+1))}),o._uU(2),o.qZA()()}if(2&C){const f=E.index,b=o.oxw();o.Q6J("ngClass",o.VKq(2,M,f+1===b.page)),o.xp6(2),o.Oqu(f+1)}}let e=(()=>{class C{constructor(){this.page=1,this.pagesCount=1,this.onPageChange=new o.vpe}ngOnInit(){}arrayOfN(f){return Array(f)}nextPage(){this.page<this.pagesCount&&(this.page++,this.onPageChange.emit(this.page))}previousPage(){this.page>1&&(this.page--,this.onPageChange.emit(this.page))}goToPage(f){f!=this.page&&f>0&&f<=this.pagesCount&&(this.page=f,this.onPageChange.emit(this.page))}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275cmp=o.Xpm({type:C,selectors:[["app-pagination-links"]],inputs:{page:"page",pagesCount:"pagesCount"},outputs:{onPageChange:"onPageChange"},decls:14,vars:1,consts:[[1,"card-footer","py-4"],["aria-label","..."],[1,"pagination","justify-content-end","mb-0"],[1,"page-item"],[1,"page-link",3,"click"],[1,"fas","fa-angle-left"],[1,"sr-only"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"fas","fa-angle-right"],[1,"page-item",3,"ngClass"]],template:function(f,b){1&f&&(o.TgZ(0,"div",0)(1,"nav",1)(2,"ul",2)(3,"li",3)(4,"button",4),o.NdJ("click",function(){return b.previousPage()}),o._UZ(5,"i",5),o.TgZ(6,"span",6),o._uU(7,"Previous"),o.qZA()()(),o.YNc(8,J,3,4,"li",7),o.TgZ(9,"li",3)(10,"button",4),o.NdJ("click",function(){return b.nextPage()}),o._UZ(11,"i",8),o.TgZ(12,"span",6),o._uU(13,"Next"),o.qZA()()()()()()),2&f&&(o.xp6(8),o.Q6J("ngForOf",b.arrayOfN(b.pagesCount)))},dependencies:[F.mk,F.sg]}),C})()},1081:(Q,w,_)=>{_.r(w),_.d(w,{CustomModulesModule:()=>Ce});var o=_(6895),F=_(3060),M=_(2917),J=_(4327),e=_(4650),C=_(4463),E=_(3986),f=_(9359),b=_(1424),p=_(2953),v=_(7009),d=_(4424),g=_(4006),T=_(9549),A=_(4144),N=_(5113),k=_(3238);const u=["f"];function Z(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",9),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.data[l.id]=i)}),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.s9C("placeholder",t.name),e.Q6J("name",t.id)("required",t.is_required)("ngModel",n.data[t.id])}}function c(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",9),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.data[l.id]=i)}),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.s9C("placeholder",t.name),e.Q6J("name",t.id)("required",t.is_required)("ngModel",n.data[t.id])}}function h(s,r){if(1&s&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.value)}}function q(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.data[l.id]=i)}),e.YNc(4,h,2,2,"mat-option",11),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("name",t.id)("required",t.is_required)("ngModel",n.data[t.id]),e.xp6(1),e.Q6J("ngForOf",t.options)("ngForTrack",n.option)}}function y(s,r){if(1&s&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.value)}}function O(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",13),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.data[l.id]=i)}),e.YNc(4,y,2,2,"mat-option",11),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("name",t.id)("required",t.is_required)("ngModel",n.data[t.id]),e.xp6(1),e.Q6J("ngForOf",t.options)("ngForTrack",n.option)}}function S(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,Z,4,5,"mat-form-field",7),e.YNc(2,c,4,5,"mat-form-field",7),e.YNc(3,q,5,6,"mat-form-field",7),e.YNc(4,O,5,6,"mat-form-field",7),e.qZA()),2&s){const t=r.$implicit;e.Tol("long-text"===t.type?"col-md-12":"col-md-6"),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf","long-text"===t.type),e.xp6(1),e.Q6J("ngIf","select"===t.type),e.xp6(1),e.Q6J("ngIf","multi-select"===t.type)}}function K(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.onActiveStepChange(l.id))}),e._uU(1),e.qZA()}if(2&s){const t=r.$implicit,n=e.oxw();e.Gre("btn ",t.id!=n.active_step?"btn-info":"btn-light",""),e.xp6(1),e.hij(" ",t.name," ")}}function I(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",9),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw().$implicit,m=e.oxw();return e.KtG(m.data.steps[a.id][l.id]=i)}),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.s9C("placeholder",t.name),e.Q6J("name",t.id)("required",t.is_required)("ngModel",i.data.steps[n.id][t.id])}}function D(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",9),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw().$implicit,m=e.oxw();return e.KtG(m.data.steps[a.id][l.id]=i)}),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.s9C("placeholder",t.name),e.Q6J("name",t.id)("required",t.is_required)("ngModel",i.data.steps[n.id][t.id])}}function Y(s,r){if(1&s&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.value)}}function $(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw().$implicit,m=e.oxw();return e.KtG(m.data.steps[a.id][l.id]=i)}),e.YNc(4,Y,2,2,"mat-option",11),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("name",t.id)("required",t.is_required)("ngModel",i.data.steps[n.id][t.id]),e.xp6(1),e.Q6J("ngForOf",t.options)("ngForTrack",i.option)}}function B(s,r){if(1&s&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.value)}}function G(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",13),e.NdJ("ngModelChange",function(i){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw().$implicit,m=e.oxw();return e.KtG(m.data.steps[a.id][l.id]=i)}),e.YNc(4,B,2,2,"mat-option",11),e.qZA()()}if(2&s){const t=e.oxw().$implicit,n=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("name",t.id)("required",t.is_required)("ngModel",i.data.steps[n.id][t.id]),e.xp6(1),e.Q6J("ngForOf",t.options)("ngForTrack",i.option)}}function H(s,r){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,I,4,5,"mat-form-field",7),e.YNc(2,D,4,5,"mat-form-field",7),e.YNc(3,$,5,6,"mat-form-field",7),e.YNc(4,G,5,6,"mat-form-field",7),e.qZA()),2&s){const t=r.$implicit;e.Tol("long-text"===t.type?"col-md-12":"col-md-6"),e.xp6(1),e.Q6J("ngIf","text"===t.type),e.xp6(1),e.Q6J("ngIf","long-text"===t.type),e.xp6(1),e.Q6J("ngIf","select"===t.type),e.xp6(1),e.Q6J("ngIf","multi-select"===t.type)}}const R=function(s){return{hidden_step:s}};function j(s,r){if(1&s&&(e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,H,5,7,"div",3),e.qZA()()),2&s){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,R,t.id!=n.active_step)),e.xp6(1),e.Q6J("ngForOf",t.fields)}}let z=(()=>{class s{constructor(t,n,i){this.customModulesService=t,this.modalService=n,this._snackBar=i,this.isLoading=!1,this.horizontalPosition="end",this.verticalPosition="bottom",this.closingEvent=new e.vpe,this.reloadEvent=new e.vpe,this.fields=[],this.steps=[],this.active_step=null}ngOnInit(){this.data={};for(let t of this.custom_module.fields)this.data[t.id]="";this.active_step=null,this.data.steps={};for(let t of this.custom_module.steps){this.data.steps[t.id]={},this.active_step||(this.active_step=t.id);for(let n of t.fields)this.data.steps[t.id][n.id]=""}}onClose(){this.closingEvent.emit()}toggleStatus(){this.data.enabled=!this.data.enabled}onSubmit(){const t=Object.values(this.form.controls);for(let n of t)if(n.invalid)return;if(this.isLoading=!0,!this.selectedElement){let n=[],i=[];for(let a in this.data)if("steps"===a)for(let m in this.data.steps)for(let x in this.data.steps[m])i.push({module_step_id:Number(m),module_step_field_id:Number(x),value:this.data.steps[m][x]});else n.push({module_field_id:Number(a),value:this.data[a]});let l={fields:n,steps:i};console.log(i),this.customModulesService.create_elements(this.custom_module.id,l).subscribe(a=>{this.onSuccess(a)},a=>{this.onError(a)})}}onSuccess(t){this.isLoading=!1,this.reloadEvent.emit(),this.modalService.dismissAll(),this._snackBar.open("Enregistr\xe9 avec succ\xe8s!","Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["success-snackbar"]})}onError(t){this.isLoading=!1;let n=t.error.data;for(let i in n)this._snackBar.open(n[i],"Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["danger-snackbar"]})}onActiveStepChange(t){this.active_step=t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.L),e.Y36(p.FF),e.Y36(v.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-modules-elements-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(u,5),2&t){let i;e.iGM(i=e.CRH())&&(n.form=i.first)}},inputs:{selectedElement:"selectedElement",custom_module:"custom_module"},outputs:{closingEvent:"closingEvent",reloadEvent:"reloadEvent"},decls:8,vars:5,consts:[[3,"title","isLoading","closingEvent","submit"],["f","ngForm"],[1,"row"],[3,"class",4,"ngFor","ngForOf"],[1,"col-md-12","d-flex"],[3,"class","click",4,"ngFor","ngForOf"],["class","col-md-12 conatiner-fluid",4,"ngFor","ngForOf"],["class","full-width",4,"ngIf"],[1,"full-width"],["matInput","",3,"placeholder","name","required","ngModel","ngModelChange"],[3,"name","required","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrack"],[3,"value"],["multiple","",3,"name","required","ngModel","ngModelChange"],[3,"click"],[1,"col-md-12","conatiner-fluid"],[1,"row",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"app-base-modal",0),e.NdJ("closingEvent",function(){return n.onClose()})("submit",function(){return n.onSubmit()}),e.TgZ(1,"form",null,1)(3,"div",2),e.YNc(4,S,5,7,"div",3),e.TgZ(5,"div",4),e.YNc(6,K,2,4,"button",5),e.qZA(),e.YNc(7,j,3,4,"div",6),e.qZA()()()),2&t&&(e.Q6J("title",n.custom_module.name)("isLoading",n.isLoading),e.xp6(4),e.Q6J("ngForOf",n.custom_module.fields),e.xp6(2),e.Q6J("ngForOf",n.custom_module.steps),e.xp6(1),e.Q6J("ngForOf",n.custom_module.steps))},dependencies:[o.mk,o.sg,o.O5,d.u,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.On,g.F,T.KE,T.hX,A.Nt,N.gD,k.ey],styles:[".hidden_step[_ngcontent-%COMP%]{display:none!important}.full-width[_ngcontent-%COMP%]{width:100%}"]}),s})();function W(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",12)(1,"h3",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14)(4,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAdd())}),e._uU(5," Ajouter "),e.qZA(),e.TgZ(6,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.exportData())}),e._uU(7," Export "),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(2),e.Oqu(t.custom_module?t.custom_module.name:"")}}function X(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"app-custom-modules-elements-form",17),e.NdJ("closingEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onClose())})("reloadEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormReload())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("id",t.selectedElement)("selectedElement",t.selectedElement)("custom_module",t.custom_module)}}let V=(()=>{class s{constructor(t,n,i){this.route=t,this.customModulesService=n,this.translate=i,this.data=[],this.isShowForm=!1,this.selectedElement=null,this.page=1,this.pagesCount=1,this.isLoading=!0,this.tableData=[],this.custom_module=null,this.filters={id:""},this.filtersElements=[{type:"number",name:"id",title:"ID",value:""}]}ngOnInit(){this.onLoad()}onAdd(){this.isShowForm=!0}onClose(){this.isShowForm=!1,this.selectedElement=!1}onFormReload(){this.onClose(),this.onLoad()}toggleStatusChange(t){console.log(t.status,t.id)}onEdit(t){this.isShowForm=!0,this.selectedElement=t}onPageChange(t){console.log(t),this.page=t,this.onLoad()}onLoad(){let t=this.getFilters();console.log(t),this.route.paramMap.subscribe(n=>{this.isLoading=!0,this.customModulesService.find(n.get("id")).subscribe(i=>{this.custom_module=i.data,this.tableData=[{header:"Id",key:"id",type:"text"}];for(let l of this.custom_module.fields)l.show_in_list&&this.tableData.push({header:l.name.charAt(0).toUpperCase()+l.name.slice(1),key:"field"+l.id,type:"text"});for(let l of this.custom_module.steps)for(let a of l.fields)a.show_in_list&&this.tableData.push({header:a.name.charAt(0).toUpperCase()+a.name.slice(1),key:"step_field"+a.id,type:"text"});this.tableData.push({header:"Date de cr\xe9ation",key:"created_at",type:"date"},{header:"Date de modification",key:"updated_at",type:"date"}),this.customModulesService.all_elements(n.get("id"),{params:t}).subscribe(l=>{this.data=l.data.data.map(a=>{let m=[];for(let x of a.values)m["field"+x.field.id]=x.value;for(let x of a.step_values)m["step_field"+x.module_step_field_id]=x.value;return{id:a.id,...m,created_at:a.created_at,updated_at:a.updated_at}}),this.pagesCount=l.data.last_page,this.isLoading=!1},l=>{this.isLoading=!1})})})}exportData(){this.isLoading=!0;let t=this.getFilters(!0);this.customModulesService.all({params:t,responseType:"blob"}).subscribe(n=>{console.log(n);const i=new Blob([n],{type:"text/csv"});(0,J.saveAs)(i,"medicines.csv"),this.isLoading=!1},n=>{console.log(n),this.isLoading=!1})}getFilters(t=!1){let n={};for(let i in this.filters)this.filters[i]&&""!=this.filters[i]&&(n[i]=this.filters[i]);return n.page=this.page,t&&(n.export=!0),n}onFiltersChange(t){this.filters={...t},this.onLoad()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(F.gz),e.Y36(M.L),e.Y36(C.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-modules-elements-list"]],decls:12,vars:8,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],["class","card-header border-0 d-flex",4,"ngIf"],[3,"filters","onFilterChange"],[3,"tableData","data","isLoading","onEdit","onToggleStatus"],[3,"page","pagesCount","onPageChange"],[3,"id","selectedElement","custom_module","closingEvent","reloadEvent",4,"ngIf"],[1,"card-header","border-0","d-flex"],[1,"mb-0"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[3,"id","selectedElement","custom_module","closingEvent","reloadEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,W,8,1,"div",7),e.TgZ(8,"app-base-filter",8),e.NdJ("onFilterChange",function(l){return n.onFiltersChange(l)}),e.qZA(),e.TgZ(9,"app-base-table",9),e.NdJ("onEdit",function(l){return n.onEdit(l)})("onToggleStatus",function(l){return n.toggleStatusChange(l)}),e.qZA(),e.TgZ(10,"app-pagination-links",10),e.NdJ("onPageChange",function(l){return n.onPageChange(l)}),e.qZA()()()()(),e.YNc(11,X,1,3,"app-custom-modules-elements-form",11)),2&t&&(e.xp6(7),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("filters",n.filtersElements),e.xp6(1),e.Q6J("tableData",n.tableData)("data",n.data)("isLoading",n.isLoading),e.xp6(1),e.Q6J("page",n.page)("pagesCount",n.pagesCount),e.xp6(1),e.Q6J("ngIf",n.isShowForm))},dependencies:[o.O5,E.N,f.K,b.C,z]}),s})();var L=_(136),U=_(4859),P=_(7392);const ee=["f"];function te(s,r){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"Nom est requis."),e.qZA())}function oe(s,r){if(1&s&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ne(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"mat-form-field",4)(3,"mat-label"),e._uU(4,"Option"),e.qZA(),e.TgZ(5,"input",32),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw(2).index,x=e.oxw();return e.KtG(x.fields[m].options[a].value=i)}),e.qZA()(),e.TgZ(6,"button",33),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw(2).index,m=e.oxw();return e.KtG(m.removeOption(a,l))}),e.TgZ(7,"mat-icon"),e._uU(8,"remove"),e.qZA()()()()}if(2&s){const t=r.index,n=e.oxw(2).index,i=e.oxw();e.xp6(5),e.Q6J("ngModel",i.fields[n].options[t].value)}}function ie(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",2)(2,"div",10)(3,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,l=e.oxw();return e.KtG(l.addOption(i))}),e._uU(4," Ajouter une option "),e.qZA()(),e.YNc(5,ne,9,1,"div",29),e.qZA()()}if(2&s){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",t.options)}}function se(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",16),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw();return e.KtG(a.removeField(l))}),e.TgZ(4,"mat-icon"),e._uU(5,"clear"),e.qZA()()(),e.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Nom"),e.qZA(),e.TgZ(10,"input",17),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.fields[a].name=i)}),e.qZA()()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Type"),e.qZA(),e.TgZ(15,"mat-select",18),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.fields[a].type=i)}),e.YNc(16,oe,2,2,"mat-option",19),e.qZA()()(),e.YNc(17,ie,6,1,"div",20),e.TgZ(18,"div",21)(19,"div",22)(20,"span",23),e._uU(21,"Requis:"),e.qZA(),e.TgZ(22,"label",24)(23,"input",25),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw();return e.KtG(a.toggleFieldCheckbox(l,"is_required"))}),e.qZA(),e._UZ(24,"span",26),e.qZA()()(),e.TgZ(25,"div",21)(26,"div",22)(27,"span",23),e._uU(28,"Afficher dans la liste:"),e.qZA(),e.TgZ(29,"label",24)(30,"input",25),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw();return e.KtG(a.toggleFieldCheckbox(l,"show_in_list"))}),e.qZA(),e._UZ(31,"span",26),e.qZA()()()()()}if(2&s){const t=r.$implicit,n=r.index,i=e.oxw();e.xp6(10),e.Q6J("ngModel",i.fields[n].name),e.xp6(5),e.Q6J("ngModel",i.fields[n].type),e.xp6(1),e.Q6J("ngForOf",i.types)("ngForTrack",i.antType),e.xp6(1),e.Q6J("ngIf","select"===t.type||"multi-select"===t.type),e.xp6(6),e.Q6J("checked",i.fields[n].is_required),e.xp6(7),e.Q6J("checked",i.fields[n].show_in_list)}}function le(s,r){if(1&s&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&s){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ae(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"mat-form-field",4)(3,"mat-label"),e._uU(4,"Option"),e.qZA(),e.TgZ(5,"input",38),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw(2).index,x=e.oxw().index,he=e.oxw();return e.KtG(he.steps[x].fields[m].options[a].value=i)}),e.qZA()(),e.TgZ(6,"button",33),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw(2).index,m=e.oxw().index,x=e.oxw();return e.KtG(x.removeStepOption(m,a,l))}),e.TgZ(7,"mat-icon"),e._uU(8,"remove"),e.qZA()()()()}if(2&s){const t=r.index,n=e.oxw(2).index,i=e.oxw().index,l=e.oxw();e.xp6(5),e.Q6J("ngModel",l.steps[i].fields[n].options[t].value)}}function re(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",2)(2,"div",10)(3,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,l=e.oxw().index,a=e.oxw();return e.KtG(a.addStepOption(l,i))}),e._uU(4," Ajouter une option "),e.qZA()(),e.YNc(5,ae,9,1,"div",29),e.qZA()()}if(2&s){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",t.options)}}function de(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",16),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw().index,m=e.oxw();return e.KtG(m.removeStepField(a,l))}),e.TgZ(4,"mat-icon"),e._uU(5,"clear"),e.qZA()()(),e.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Nom"),e.qZA(),e.TgZ(10,"input",17),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw().index,x=e.oxw();return e.KtG(x.steps[m].fields[a].name=i)}),e.qZA()()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Type"),e.qZA(),e.TgZ(15,"mat-select",37),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw().index,x=e.oxw();return e.KtG(x.steps[m].fields[a].type=i)}),e.YNc(16,le,2,2,"mat-option",19),e.qZA()()(),e.YNc(17,re,6,1,"div",20),e.TgZ(18,"div",21)(19,"div",22)(20,"span",23),e._uU(21,"Requis:"),e.qZA(),e.TgZ(22,"label",24)(23,"input",25),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw().index,m=e.oxw();return e.KtG(m.toggleStepFieldCheckbox(a,l,"is_required"))}),e.qZA(),e._UZ(24,"span",26),e.qZA()()(),e.TgZ(25,"div",21)(26,"div",22)(27,"span",23),e._uU(28,"Afficher dans la liste:"),e.qZA(),e.TgZ(29,"label",24)(30,"input",25),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw().index,m=e.oxw();return e.KtG(m.toggleStepFieldCheckbox(a,l,"show_in_list"))}),e.qZA(),e._UZ(31,"span",26),e.qZA()()()()()}if(2&s){const t=r.$implicit,n=r.index,i=e.oxw().index,l=e.oxw();e.xp6(10),e.Q6J("ngModel",l.steps[i].fields[n].name),e.xp6(5),e.Q6J("ngModel",l.steps[i].fields[n].type),e.xp6(1),e.Q6J("ngForOf",l.types)("ngForTrack",l.antType),e.xp6(1),e.Q6J("ngIf","select"===t.type||"multi-select"===t.type),e.xp6(6),e.Q6J("checked",l.steps[i].fields[n].is_required),e.xp6(7),e.Q6J("checked",l.steps[i].fields[n].show_in_list)}}function _e(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",34),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw();return e.KtG(a.removeStep(l))}),e.TgZ(4,"mat-icon"),e._uU(5,"clear"),e.qZA()()(),e.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Nom"),e.qZA(),e.TgZ(10,"input",35),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.steps[a].name=i)}),e.qZA()()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Ordre"),e.qZA(),e.TgZ(15,"input",36),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.steps[a].order=i)}),e.qZA()()(),e.TgZ(16,"div",10)(17,"button",11),e.NdJ("click",function(){const l=e.CHM(t).index,a=e.oxw();return e.KtG(a.addStepField(l))}),e._uU(18," Ajouter un champ "),e.qZA()(),e.YNc(19,de,32,7,"div",12),e.qZA()()}if(2&s){const t=r.$implicit,n=r.index,i=e.oxw();e.xp6(10),e.Q6J("ngModel",i.steps[n].name),e.xp6(5),e.Q6J("ngModel",i.steps[n].order),e.xp6(4),e.Q6J("ngForOf",t.fields)}}let me=(()=>{class s{constructor(t,n,i){this.customModulesService=t,this.modalService=n,this._snackBar=i,this.title=L._G.CUSTOM_MODULES,this.types=L.HK,this.isLoading=!1,this.horizontalPosition="end",this.verticalPosition="bottom",this.closingEvent=new e.vpe,this.reloadEvent=new e.vpe,this.fields=[],this.steps=[]}ngOnInit(){this.title=(this.selectedElement?L._G.UPDATE_ELEMENT:L._G.CREATE_ELEMENT)+" "+this.title,this.data={name:this.selectedElement?this.selectedElement.name:"",icon:this.selectedElement?this.selectedElement.icon:""}}onClose(){this.closingEvent.emit()}toggleStatus(){this.data.enabled=!this.data.enabled}onSubmit(){const t=Object.values(this.form.controls);for(let n of t)if(n.invalid)return;if(this.isLoading=!0,this.selectedElement)this.customModulesService.update(this.selectedElement.id,this.data).subscribe(n=>{this.onSuccess(n)},n=>{this.onError(n)});else{let n={...this.data,fields:this.fields,steps:this.steps};console.log(n),this.customModulesService.create(n).subscribe(i=>{this.onSuccess(i)},i=>{this.onError(i)})}}onSuccess(t){this.isLoading=!1,this.reloadEvent.emit(),this.modalService.dismissAll(),this._snackBar.open("Enregistr\xe9 avec succ\xe8s!","Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["success-snackbar"]})}onError(t){this.isLoading=!1;let n=t.error.data;for(let i in n)this._snackBar.open(n[i],"Ok",{horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,panelClass:["danger-snackbar"]})}addField(){this.fields.push({name:"",type:"",show_in_list:!0,is_required:!0,options:[]})}removeField(t){this.fields.splice(t,1)}toggleFieldCheckbox(t,n){this.fields[t][n]=!this.fields[t][n]}addOption(t){this.fields[t].options.push({value:""})}removeOption(t,n){this.fields[t].options.splice(n,1)}addStep(){this.steps.push({name:"",order:"",fields:[]})}removeStep(t){this.steps.splice(t,1)}addStepField(t){this.steps[t].fields.push({name:"",type:"",show_in_list:!0,is_required:!0,options:[]})}removeStepField(t,n){this.steps[t].fields.splice(n,1)}addStepOption(t,n){this.steps[t].fields[n].options.push({value:""})}removeStepOption(t,n,i){this.steps[t].fields[n].options.splice(i,1)}toggleStepFieldCheckbox(t,n,i){this.steps[t].fields[n][i]=!this.steps[t].fields[n][i]}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.L),e.Y36(p.FF),e.Y36(v.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-modules-form"]],viewQuery:function(t,n){if(1&t&&e.Gf(ee,5),2&t){let i;e.iGM(i=e.CRH())&&(n.form=i.first)}},inputs:{selectedElement:"selectedElement"},outputs:{closingEvent:"closingEvent",reloadEvent:"reloadEvent"},decls:27,vars:7,consts:[[3,"title","isLoading","closingEvent","submit"],["f","ngForm"],[1,"row"],[1,"col-md-6"],[1,"full-width"],["matInput","","placeholder","Nom","name","name","required","",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["matInput","","placeholder","Icon","name","icon",3,"ngModel","ngModelChange"],["icon","ngModel"],[1,"col-12","text-right"],["type","button",1,"btn","btn-primary",3,"click"],["class","col-12 container-fluid",4,"ngFor","ngForOf"],[1,"col-12","container-fluid"],[1,"row","isolated-section"],[1,"col-12","mt-2","text-right"],["type","button","mat-mini-fab","","color","warn","aria-label","Supprimer le champs",3,"click"],["matInput","","placeholder","Nom","name","field_name[]","required","",3,"ngModel","ngModelChange"],["name","field_type[]","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrack"],["class","col-12",4,"ngIf"],[1,"col-md-6","d-flex","align-items-center"],[1,"form-group","d-flex","mb-0"],[1,"mr-2"],[1,"custom-toggle","mb-0"],["type","checkbox",3,"checked","click"],[1,"custom-toggle-slider","rounded-circle"],[3,"value"],[1,"col-12"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"form-group","d-flex","align-items-center"],["matInput","","placeholder","Option","name","field_option[]","required","",3,"ngModel","ngModelChange"],["type","button","mat-mini-fab","","color","warn","aria-label","Supprimer",3,"click"],["type","button","mat-mini-fab","","color","warn","aria-label","Supprimer l'etape",3,"click"],["matInput","","placeholder","Nom","name","step_name[]","required","",3,"ngModel","ngModelChange"],["type","number","matInput","","placeholder","Ordre","name","step_order[]","required","",3,"ngModel","ngModelChange"],["name","step_field_type[]","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Option","name","step_field_option[]","required","",3,"ngModel","ngModelChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"app-base-modal",0),e.NdJ("closingEvent",function(){return n.onClose()})("submit",function(){return n.onSubmit()}),e.TgZ(1,"form",null,1)(3,"div",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Nom"),e.qZA(),e.TgZ(8,"input",5,6),e.NdJ("ngModelChange",function(l){return n.data.name=l}),e.qZA(),e.YNc(10,te,2,0,"mat-error",7),e.qZA()(),e.TgZ(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Icon"),e.qZA(),e.TgZ(15,"input",8,9),e.NdJ("ngModelChange",function(l){return n.data.icon=l}),e.qZA()()(),e._UZ(17,"hr"),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return n.addField()}),e._uU(20," Ajouter un champ "),e.qZA()(),e.YNc(21,se,32,7,"div",12),e._UZ(22,"hr"),e.TgZ(23,"div",10)(24,"button",11),e.NdJ("click",function(){return n.addStep()}),e._uU(25," Ajouter une etape "),e.qZA()(),e.YNc(26,_e,20,3,"div",12),e.qZA()()()),2&t){const i=e.MAs(9);e.Q6J("title",n.title)("isLoading",n.isLoading),e.xp6(8),e.Q6J("ngModel",n.data.name),e.xp6(2),e.Q6J("ngIf",i.invalid&&i.touched),e.xp6(5),e.Q6J("ngModel",n.data.icon),e.xp6(6),e.Q6J("ngForOf",n.fields),e.xp6(5),e.Q6J("ngForOf",n.steps)}},dependencies:[o.sg,o.O5,d.u,g._Y,g.Fj,g.wV,g.JJ,g.JL,g.Q7,g.On,g.F,T.TO,T.KE,T.hX,A.Nt,U.lW,P.Hw,N.gD,k.ey],styles:[".remove-option[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;justify-content:center;align-items:center;border-radius:50%;border:none;background:#d9082f;color:#fff;margin-left:13px;cursor:pointer}.full-width[_ngcontent-%COMP%]{width:100%}.isolated-section[_ngcontent-%COMP%]{padding:10px 10px 35px 3px;margin:14px 0;border:1px solid grey;border-radius:10px}"]}),s})();function ce(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"app-custom-modules-form",16),e.NdJ("closingEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onClose())})("reloadEvent",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormReload())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("id",t.selectedElement)("selectedElement",t.selectedElement)}}const ue=[{path:"",component:(()=>{class s{constructor(t,n){this.customModulesService=t,this.translate=n,this.data=[],this.isShowForm=!1,this.selectedElement=null,this.page=1,this.pagesCount=1,this.isLoading=!0,this.tableData=[{header:"Id",key:"id",type:"text"},{header:"Nom",key:"name",type:"text"},{header:"Date de cr\xe9ation",key:"created_at",type:"date"},{header:"Date de modification",key:"updated_at",type:"date"}],this.filters={type:"",code:"",name:"",id:""},this.filtersElements=[{type:"number",name:"id",title:"ID",value:""},{type:"text",name:"name",title:"Nom",value:""}]}ngOnInit(){this.onLoad()}onAdd(){this.isShowForm=!0}onClose(){this.isShowForm=!1,this.selectedElement=!1}onFormReload(){this.onClose(),this.onLoad()}toggleStatusChange(t){console.log(t.status,t.id)}onEdit(t){this.isShowForm=!0,this.selectedElement=t}onPageChange(t){console.log(t),this.page=t,this.onLoad()}onLoad(){this.isLoading=!0;let t=this.getFilters();console.log(t),this.customModulesService.all({params:t}).subscribe(n=>{console.log(n),this.data=n.data.data,this.pagesCount=n.data.last_page,this.isLoading=!1},n=>{this.isLoading=!1})}exportData(){this.isLoading=!0;let t=this.getFilters(!0);this.customModulesService.all({params:t,responseType:"blob"}).subscribe(n=>{console.log(n);const i=new Blob([n],{type:"text/csv"});(0,J.saveAs)(i,"medicines.csv"),this.isLoading=!1},n=>{console.log(n),this.isLoading=!1})}getFilters(t=!1){let n={};for(let i in this.filters)this.filters[i]&&""!=this.filters[i]&&(n[i]=this.filters[i]);return n.page=this.page,t&&(n.export=!0),n}onFiltersChange(t){this.filters={...t},this.onLoad()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.L),e.Y36(C.sK))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-modules-list"]],decls:19,vars:7,consts:[[1,"header","bg-gradient-info","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0","d-flex"],[1,"mb-0"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[3,"filters","onFilterChange"],[3,"tableData","data","isLoading","onEdit","onToggleStatus"],[3,"page","pagesCount","onPageChange"],[3,"id","selectedElement","closingEvent","reloadEvent",4,"ngIf"],[3,"id","selectedElement","closingEvent","reloadEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3",8),e._uU(9,"FORM DYNAMIQUE"),e.qZA(),e.TgZ(10,"div",9)(11,"button",10),e.NdJ("click",function(){return n.onAdd()}),e._uU(12," Ajouter "),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return n.exportData()}),e._uU(14," Export "),e.qZA()()(),e.TgZ(15,"app-base-filter",12),e.NdJ("onFilterChange",function(l){return n.onFiltersChange(l)}),e.qZA(),e.TgZ(16,"app-base-table",13),e.NdJ("onEdit",function(l){return n.onEdit(l)})("onToggleStatus",function(l){return n.toggleStatusChange(l)}),e.qZA(),e.TgZ(17,"app-pagination-links",14),e.NdJ("onPageChange",function(l){return n.onPageChange(l)}),e.qZA()()()()(),e.YNc(18,ce,1,2,"app-custom-modules-form",15)),2&t&&(e.xp6(15),e.Q6J("filters",n.filtersElements),e.xp6(1),e.Q6J("tableData",n.tableData)("data",n.data)("isLoading",n.isLoading),e.xp6(1),e.Q6J("page",n.page)("pagesCount",n.pagesCount),e.xp6(1),e.Q6J("ngIf",n.isShowForm))},dependencies:[o.O5,E.N,f.K,b.C,me]}),s})()},{path:"elements/:id",component:V}];let pe=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[F.Bz.forChild(ue),F.Bz]}),s})();var ge=_(5642),fe=_(529);let Ce=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[o.ez,pe,ge.K,fe.JF,g.u5,C.aw,v.ZX,T.lN,A.c,U.ot,P.Ps,N.LD]}),s})()}}]);